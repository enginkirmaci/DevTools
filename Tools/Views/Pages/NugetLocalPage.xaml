<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="Tools.Views.Pages.NugetLocalPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Background="Transparent"
    mc:Ignorable="d">

    <Grid Margin="0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Modern Configuration Area  -->
        <Border
            Margin="0,0,0,12"
            Padding="24,24,24,18"
            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
            BorderBrush="Transparent"
            BorderThickness="0"
            CornerRadius="8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <TextBlock
                    Margin="0,0,0,12"
                    VerticalAlignment="Center"
                    FontWeight="SemiBold"
                    Text="Watch Directory" />

                <TextBox
                    Grid.Column="1"
                    Margin="12,0,0,12"
                    VerticalAlignment="Center"
                    Text="{x:Bind ViewModel.WatchFolder, Mode=TwoWay}" />

                <Button
                    Grid.Column="2"
                    Height="31"
                    Margin="12,0,0,12"
                    VerticalAlignment="Center"
                    Command="{x:Bind ViewModel.SelectFolderCommand}"
                    CommandParameter="Watch"
                    ToolTipService.ToolTip="Browse for watch folder">
                    <FontIcon FontSize="16" Glyph="&#xE8B7;" />
                </Button>

                <!--  Start/Stop Button  -->
                <Button
                    Grid.RowSpan="2"
                    Grid.Column="3"
                    Width="120"
                    Height="80"
                    Margin="18,0,0,0"
                    Command="{x:Bind ViewModel.WatchChangesCommand}"
                    CommandParameter="{StaticResource TrueValue}"
                    Style="{StaticResource AccentButtonStyle}"
                    Visibility="{x:Bind ViewModel.WatchStarted, Mode=OneWay, Converter={StaticResource InverseBooleanToVisibilityConverter}}">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <FontIcon FontSize="20" Glyph="&#xE768;" />
                        <TextBlock FontSize="16" Text="Watch" />
                    </StackPanel>
                </Button>

                <Button
                    Grid.RowSpan="2"
                    Grid.Column="3"
                    Width="120"
                    Height="80"
                    Margin="18,0,0,0"
                    Command="{x:Bind ViewModel.WatchChangesCommand}"
                    CommandParameter="{StaticResource FalseValue}"
                    Visibility="{x:Bind ViewModel.WatchStarted, Mode=OneWay, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <FontIcon FontSize="20" Glyph="&#xE71A;" />
                        <TextBlock FontSize="16" Text="Stop" />
                    </StackPanel>
                </Button>

                <TextBlock
                    Grid.Row="1"
                    VerticalAlignment="Center"
                    FontWeight="SemiBold"
                    Text="Copy Directory" />

                <TextBox
                    Grid.Row="1"
                    Grid.Column="1"
                    Margin="12,0,0,0"
                    VerticalAlignment="Center"
                    Text="{x:Bind ViewModel.CopyFolder, Mode=TwoWay}" />

                <Button
                    Grid.Row="1"
                    Grid.Column="2"
                    Height="31"
                    Margin="12,0,0,0"
                    VerticalAlignment="Center"
                    Command="{x:Bind ViewModel.SelectFolderCommand}"
                    CommandParameter="Copy"
                    ToolTipService.ToolTip="Browse for copy folder">
                    <FontIcon FontSize="16" Glyph="&#xE8B7;" />
                </Button>

                <CheckBox
                    Grid.Row="3"
                    Grid.ColumnSpan="3"
                    Margin="0,12,0,0"
                    Content="Clear NuGet cache for copied packages"
                    IsChecked="{x:Bind ViewModel.ClearCacheOnCopy, Mode=TwoWay}" />
            </Grid>
        </Border>

        <!--  Modern Stats Card  -->
        <Border
            Grid.Row="1"
            Margin="0,0,0,12"
            Padding="24,12"
            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
            BorderBrush="Transparent"
            BorderThickness="0"
            CornerRadius="8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Border
                    Width="40"
                    Height="40"
                    Margin="0,0,16,0"
                    Background="#33999999"
                    CornerRadius="8">
                    <FontIcon
                        FontSize="20"
                        Foreground="White"
                        Glyph="&#xE8F1;" />
                </Border>

                <StackPanel
                    Grid.Column="1"
                    VerticalAlignment="Center"
                    Spacing="2">
                    <TextBlock
                        Foreground="White"
                        Opacity="0.9"
                        Text="Packages Moved (Last 60s)" />
                    <TextBlock
                        FontWeight="Bold"
                        Foreground="White"
                        Text="{x:Bind ViewModel.Count, Mode=OneWay}" />
                </StackPanel>
            </Grid>
        </Border>

        <!--  Modern Log Output Card  -->
        <Border
            Grid.Row="2"
            Padding="20,12"
            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
            BorderBrush="Transparent"
            BorderThickness="0"
            CornerRadius="8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <TextBlock
                    Margin="0,0,0,12"
                    Style="{StaticResource BodyStrongTextBlockStyle}"
                    Text="Activity Log" />

                <ScrollViewer Grid.Row="1" VerticalAlignment="Top">
                    <Border
                        Padding="12"
                        VerticalAlignment="Stretch"
                        Background="{ThemeResource SubtleFillColorSecondaryBrush}"
                        CornerRadius="6">
                        <ItemsRepeater VerticalAlignment="Stretch" ItemsSource="{x:Bind ViewModel.FileList, Mode=OneWay}">
                            <ItemsRepeater.ItemTemplate>
                                <DataTemplate x:DataType="x:String">
                                    <TextBlock
                                        Margin="0,4"
                                        FontFamily="Consolas"
                                        FontSize="12"
                                        Text="{x:Bind}"
                                        TextWrapping="Wrap" />
                                </DataTemplate>
                            </ItemsRepeater.ItemTemplate>
                        </ItemsRepeater>
                    </Border>
                </ScrollViewer>
            </Grid>
        </Border>
    </Grid>
</Page>
<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Tools.Views.Pages.NugetLocalPage"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	mc:Ignorable="d"
    Background="Transparent">

	<Grid Margin="0,0,0,24">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<!-- Configuration Area -->
		<Border
            Margin="0,0,0,12"
            Padding="16"
            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
            BorderThickness="1"
            CornerRadius="8">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition />
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="Auto" />
				</Grid.ColumnDefinitions>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto" />
					<RowDefinition Height="Auto" />
				</Grid.RowDefinitions>

				<TextBlock Text="Watch Directory" VerticalAlignment="Center" Margin="0,0,12,0" />

				<TextBox
                    Grid.Column="1"
                    Margin="0,8"
                    Text="{x:Bind ViewModel.WatchFolder, Mode=TwoWay}" />

				<Button
                    Grid.Column="2"
                    Margin="8,8,16,8"
                    VerticalAlignment="Stretch"
					Command="{x:Bind ViewModel.SelectFolderCommand}"
                    CommandParameter="Watch">
					<FontIcon Glyph="&#xE8B7;" FontSize="16" />
				</Button>

				<TextBlock Grid.Row="1" Text="Copy Directory" VerticalAlignment="Center" Margin="0,0,12,0" />

				<TextBox
                    Grid.Row="1"
                    Grid.Column="1"
                    Margin="0,8"
                    Text="{x:Bind ViewModel.CopyFolder, Mode=TwoWay}" />

				<Button
                    Grid.Row="1"
                    Grid.Column="2"
                    Margin="8,8,16,8"
                    VerticalAlignment="Stretch"
					Command="{x:Bind ViewModel.SelectFolderCommand}"
                    CommandParameter="Copy">
					<FontIcon Glyph="&#xE8B7;" FontSize="16" />
				</Button>

				<!-- Start/Stop Button -->
				<Button
                    Grid.RowSpan="2"
                    Grid.Column="3"
                    Width="156"
                    Margin="8"
                    VerticalAlignment="Stretch"
                    Style="{StaticResource AccentButtonStyle}"
                    Command="{x:Bind ViewModel.WatchChangesCommand}"
                    CommandParameter="{StaticResource TrueValue}"
                    Visibility="{x:Bind ViewModel.WatchStarted, Mode=OneWay, Converter={StaticResource InverseBooleanToVisibilityConverter}}">
					<StackPanel Orientation="Horizontal">
						<FontIcon Glyph="&#xE768;" Margin="0,0,8,0" FontSize="16" />
						<TextBlock Text="Watch Folder" />
					</StackPanel>
				</Button>

				<Button
                    Grid.RowSpan="2"
                    Grid.Column="3"
                    Width="156"
                    Margin="8"
                    VerticalAlignment="Stretch"
                    Command="{x:Bind ViewModel.WatchChangesCommand}"
                    CommandParameter="{StaticResource FalseValue}"
                    Visibility="{x:Bind ViewModel.WatchStarted, Mode=OneWay, Converter={StaticResource BooleanToVisibilityConverter}}">
					<StackPanel Orientation="Horizontal">
						<FontIcon Glyph="&#xE71A;" Margin="0,0,8,0" FontSize="16" />
						<TextBlock Text="Stop Watch" />
					</StackPanel>
				</Button>
			</Grid>
		</Border>

		<!-- Stats InfoBar -->
		<InfoBar
            Title="Total packages moved (in 60 seconds):"
            Grid.Row="1"
            Margin="0,0,0,12"
            IsClosable="False"
            IsOpen="True"
            Message="{x:Bind ViewModel.Count, Mode=OneWay}" />

		<!-- Log Output -->
		<Border
            Grid.Row="2"
            Padding="16"
            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
            BorderThickness="1"
            CornerRadius="8">
			<ScrollViewer Height="300">
				<ItemsRepeater ItemsSource="{x:Bind ViewModel.FileList, Mode=OneWay}">
					<ItemsRepeater.ItemTemplate>
						<DataTemplate x:DataType="x:String">
							<TextBlock Text="{x:Bind}" Margin="0,4" TextWrapping="Wrap" />
						</DataTemplate>
					</ItemsRepeater.ItemTemplate>
				</ItemsRepeater>
			</ScrollViewer>
		</Border>
	</Grid>
</Page>